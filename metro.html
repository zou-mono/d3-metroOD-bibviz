<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <title>Title</title>    <!--<script src="js/d3.min.js" type="text/javascript"></script>-->    <link rel="stylesheet" href="css/metro.css"/>    <script src="https://d3js.org/d3.v5.min.js" type="text/JavaScript"></script>    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.8/d3.min.js" type="text/JavaScript"></script>--></head><body><svg height="500" id="station-chart" width="1200"></svg><div id="selected"> Hover over a line or bar to show more info about a contradiction, chapter or book.</div><script>    var bData = null;    var station_color = {        1: "#006400",        2: "#FF9000",        3: "#00BFFF",        4: "#FF0000",        5: "#9A32FF",        7: "#0000FF",        9: "#8B5F65",        11: "#8B0000"    };    if (!window.maxArcs) {        var maxArcs = 10;    }    // Returns true if a new tab should be opened from a click    function newTab() {        return (window.event && ((event.which == 1 && (event.ctrlKey === true || event.metaKey === true) || (event.which == 2))));    }    function getAbsoluteChapter(verse) {        var parts = /^(\d?\s?[a-z]+)[\s.:]*(\d*):?(\d*)[-]?(\d*)/i.exec(verse);        //console.log(parts);        if (parts === null) return;        var chapter = bookToChapter[parts[1]];        chapter = (chapter === undefined) ? bookToChapter[parts[1] + 's'] : chapter;        return chapter + parseInt(parts[2]);    }    // Chooses a color for metro station chart    function station_colorize(lineNO) {        var color = 'crimson';        var distance;        if (contraFilters.colorize == 'Rainbow') {            distance = Math.abs(end - start);            color = d3.hsl(distance / 1189 * 360, 0.7, 0.35);        }        return color;    }    d3.select('#selected').transition().delay(7000).duration(1000).style('opacity', 1.0);    d3.csv('data/station_flow.csv').then(function (data) {        bData = data;        var svg = d3.select('#station-chart');        var maxFLOW = d3.max(data, d => parseInt(d.TOTAL_FLOW));        var minFLOW = d3.min(data, d => parseInt(d.TOTAL_FLOW));        var yScale = d3.scaleLinear().domain([minFLOW,maxFLOW]).range([0,100]);        svg.selectAll('rect')            .data(data)            .enter().append('rect')            .attr('x', function (d, i) {                return i*10;            })            .attr('y', 400)            .attr('width', 10)            .attr('height', d => yScale(parseInt(d.TOTAL_FLOW)))            .attr('fill', d=> station_color[parseInt(d.LineNO)]) //[parseInt(d.lineNO)]            // .attr('fill', "#006400")            .on('mouseover', function (d) {                d3.select('#selected')                    .html(d.ZDMC + '<br/><span class="subdued">全天总客流量' +                        d.TOTAL_FLOW + '<br/> 全天进站客流量' + d.IN_FLOW +                        '<br/> 全天出站客流量' + d.OUT_FLOW);            });    });</script></body></html>